export HOST=arm-linux
export CROSS=arm-openwrt-linux-uclibcgnueabi-
export TARGETMACH=arm-linux
export CC=${CROSS}gcc
export CXX=${CROSS}g++
export AR=${CROSS}ar
export LD=${CROSS}ld
export AS=${CROSS}as
export STRIP=${CROSS}strip
export RANLIB=${CORSS}ranlib
export PREFIX=/usr
export DESTDIR=${CURDIR}/_install

define check_package
	$(eval FILE_NAME := $1${TARGET})
	if [ ! -d ${FILE_NAME} ]; then \
		case $(shell ls ../dl | grep ${FILE_NAME} | sed "s/${FILE_NAME}.//") in \
			tar.gz) tar xvfz ../dl/${FILE_NAME}.tar.gz;; \
			tar.bz2) tar xvfj ../dl/${FILE_NAME}.tar.bz2;; \
			tar.xz) tar xvfJ ../dl/${FILE_NAME}.tar.xz;; \
			zip) unzip ../dl/${FILE_NAME}.zip;; \
			*) echo "Unknown file type";; \
		esac; \
		if [ -d patch ]; then \
			patch -p0 < patch/$1.diff; \
		fi; \
		rm -rf .configured;\
	fi; 
endef

define build_package
	make -C $1 ${BUILD_OPTIONS}
endef

define install_package
	make -C $1 install  ${INSTALL_OPTIONS}
endef

define clean_package
	rm -rf $1 _install 
endef

define distclean_package
	rm -rf $1 _install .configured
endef
